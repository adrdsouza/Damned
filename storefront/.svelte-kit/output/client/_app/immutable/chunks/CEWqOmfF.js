import{_ as o}from"./C1FmrZbK.js";import{c as E}from"./DMI_bSna.js";const n=E();function l(t){var e,a,r,c,s,p,g,_,u,d,h,m,f,y;return{id:t.id,name:t.title,slug:t.handle,description:t.description||"",price:((e=t.variants[0])==null?void 0:e.original_price)/100||0,salePrice:((a=t.variants[0])==null?void 0:a.calculated_price)!==((r=t.variants[0])==null?void 0:r.original_price)?((c=t.variants[0])==null?void 0:c.calculated_price)/100:void 0,onSale:((s=t.variants[0])==null?void 0:s.calculated_price)!==((p=t.variants[0])==null?void 0:p.original_price),image:t.thumbnail||`/images/products/${t.handle}.jpg`,category:((_=(g=t.collection)==null?void 0:g.title)==null?void 0:_.toLowerCase())||"uncategorized",featured:((u=t.tags)==null?void 0:u.some(i=>i.value==="featured"))||!1,new:((d=t.tags)==null?void 0:d.some(i=>i.value==="new"))||!1,specs:{material:((h=t.metadata)==null?void 0:h.material)||"Premium steel",length:((m=t.metadata)==null?void 0:m.length)||"8.5 inches (overall)",weight:((f=t.metadata)==null?void 0:f.weight)||"4.2 oz",handle:((y=t.metadata)==null?void 0:y.handle)||"G10"},variations:t.variants.map(i=>({id:i.id,name:i.title,price:i.original_price/100,salePrice:i.calculated_price!==i.original_price?i.calculated_price/100:void 0,inStock:i.inventory_quantity>0,attributes:i.options.reduce((w,v)=>(w[v.option.title]=v.value,w),{}),image:i.thumbnail||t.thumbnail||`/images/products/${t.handle}.jpg`}))}}async function x(){try{const{products:t}=await n.products.list({expand:"variants,images,collection,tags,options"});return t.map(l)}catch(t){console.error("Error fetching products from Medusa:",t);const{products:e}=await o(async()=>{const{products:a}=await import("./CRshKf2J.js");return{products:a}},[],import.meta.url);return e}}async function A(t){try{const{products:e}=await n.products.list({handle:t,expand:"variants,images,collection,tags,options"});return e.length===0?null:l(e[0])}catch(e){console.error(`Error fetching product ${t} from Medusa:`,e);const{products:a}=await o(async()=>{const{products:r}=await import("./CRshKf2J.js");return{products:r}},[],import.meta.url);return a.find(r=>r.slug===t)||null}}async function C(t){try{const{collections:e}=await n.collections.list({title:t});if(e.length===0)return[];const a=e[0].id,{products:r}=await n.products.list({collection_id:[a],expand:"variants,images,collection,tags,options"});return r.map(l)}catch(e){console.error(`Error fetching products by category ${t} from Medusa:`,e);const{products:a}=await o(async()=>{const{products:r}=await import("./CRshKf2J.js");return{products:r}},[],import.meta.url);return a.filter(r=>r.category===t)}}export{x as getAllProducts,A as getProductBySlug,C as getProductsByCategory,l as mapMedusaProduct};
