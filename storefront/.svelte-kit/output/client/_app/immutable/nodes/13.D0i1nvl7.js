import{s as Dt,d as h,y as Ht,z as T,D as we,b as e,i as pe,A as Ie,B as Vt,l as u,E as nt,m as zt,c as i,g as v,e as k,o as g,h as a,j as m,k as $e,x as Bt,a as ge,f as F,t as q,F as Ft,G as We}from"../chunks/CtARYoZa.js";import{S as qt,i as Rt,d as Ye,t as Ze,a as et,m as tt,c as lt,b as rt}from"../chunks/CJBvT94Z.js";import{e as It}from"../chunks/CCLH35N-.js";import{g as Lt}from"../chunks/CfqzmGcx.js";import{u as Ut,i as Gt}from"../chunks/SJ4qyNXX.js";import{t as st}from"../chunks/DcmIUciy.js";import{z as Oe,s as Jt}from"../chunks/DJfKTWZb.js";import{C as ot}from"../chunks/BxZMAExO.js";function Pt(s,t,o){const n=s.slice();return n[14]=t[o],n}function jt(s){let t,o=s[2].subject+"",n;return{c(){t=a("p"),n=q(o),this.h()},l(r){t=i(r,"P",{class:!0});var l=k(t);n=F(l,o),l.forEach(h),this.h()},h(){u(t,"class","text-red-500 text-sm mt-1")},m(r,l){pe(r,t,l),e(t,n)},p(r,l){l&4&&o!==(o=r[2].subject+"")&&ge(n,o)},d(r){r&&h(t)}}}function St(s){let t,o=s[2].category+"",n;return{c(){t=a("p"),n=q(o),this.h()},l(r){t=i(r,"P",{class:!0});var l=k(t);n=F(l,o),l.forEach(h),this.h()},h(){u(t,"class","text-red-500 text-sm mt-1")},m(r,l){pe(r,t,l),e(t,n)},p(r,l){l&4&&o!==(o=r[2].category+"")&&ge(n,o)},d(r){r&&h(t)}}}function Nt(s){let t,o=s[2].priority+"",n;return{c(){t=a("p"),n=q(o),this.h()},l(r){t=i(r,"P",{class:!0});var l=k(t);n=F(l,o),l.forEach(h),this.h()},h(){u(t,"class","text-red-500 text-sm mt-1")},m(r,l){pe(r,t,l),e(t,n)},p(r,l){l&4&&o!==(o=r[2].priority+"")&&ge(n,o)},d(r){r&&h(t)}}}function $t(s){let t,o,n="Related Order (Optional)",r,l,x,D="None",b,N,C=It(s[0]),_=[];for(let p=0;p<C.length;p+=1)_[p]=At(Pt(s,C,p));return{c(){t=a("div"),o=a("label"),o.textContent=n,r=m(),l=a("select"),x=a("option"),x.textContent=D;for(let p=0;p<_.length;p+=1)_[p].c();this.h()},l(p){t=i(p,"DIV",{});var f=k(t);o=i(f,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(o)!=="svelte-l7bbm1"&&(o.textContent=n),r=v(f),l=i(f,"SELECT",{id:!0,class:!0});var c=k(l);x=i(c,"OPTION",{"data-svelte-h":!0}),g(x)!=="svelte-1vbnolo"&&(x.textContent=D);for(let E=0;E<_.length;E+=1)_[E].l(c);c.forEach(h),f.forEach(h),this.h()},h(){u(o,"for","order_id"),u(o,"class","block font-bold mb-2"),x.__value="",T(x,x.__value),u(l,"id","order_id"),u(l,"class","w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"),s[1].order_id===void 0&&nt(()=>s[9].call(l))},m(p,f){pe(p,t,f),e(t,o),e(t,r),e(t,l),e(l,x);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(l,null);we(l,s[1].order_id,!0),b||(N=Ie(l,"change",s[9]),b=!0)},p(p,f){if(f&1){C=It(p[0]);let c;for(c=0;c<C.length;c+=1){const E=Pt(p,C,c);_[c]?_[c].p(E,f):(_[c]=At(E),_[c].c(),_[c].m(l,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=C.length}f&2&&we(l,p[1].order_id)},d(p){p&&h(t),Ft(_,p),b=!1,N()}}}function At(s){let t,o,n=s[14].id+"",r,l,x=s[14].date+"",D,b,N=s[14].total.toFixed(2)+"",C,_,p;return{c(){t=a("option"),o=q("Order #"),r=q(n),l=q(" - "),D=q(x),b=q(" ($"),C=q(N),_=q(")"),this.h()},l(f){t=i(f,"OPTION",{});var c=k(t);o=F(c,"Order #"),r=F(c,n),l=F(c," - "),D=F(c,x),b=F(c," ($"),C=F(c,N),_=F(c,")"),c.forEach(h),this.h()},h(){t.__value=p=s[14].id,T(t,t.__value)},m(f,c){pe(f,t,c),e(t,o),e(t,r),e(t,l),e(t,D),e(t,b),e(t,C),e(t,_)},p(f,c){c&1&&n!==(n=f[14].id+"")&&ge(r,n),c&1&&x!==(x=f[14].date+"")&&ge(D,x),c&1&&N!==(N=f[14].total.toFixed(2)+"")&&ge(C,N),c&1&&p!==(p=f[14].id)&&(t.__value=p,T(t,t.__value))},d(f){f&&h(t)}}}function Mt(s){let t,o=s[2].description+"",n;return{c(){t=a("p"),n=q(o),this.h()},l(r){t=i(r,"P",{class:!0});var l=k(t);n=F(l,o),l.forEach(h),this.h()},h(){u(t,"class","text-red-500 text-sm mt-1")},m(r,l){pe(r,t,l),e(t,n)},p(r,l){l&4&&o!==(o=r[2].description+"")&&ge(n,o)},d(r){r&&h(t)}}}function Qt(s){let t,o,n,r,l,x="Home",D,b,N,C,_="Support",p,f,c,E,Le="My Tickets",y,R,oe,ne,it="New Ticket",Ae,he,at="Create New Support Ticket",Me,ie,be,O,U,ae,ut='Subject <span class="text-red-500">*</span>',De,H,He,Ve,ue,G,ce,ct='Category <span class="text-red-500">*</span>',ze,w,V,dt="Select a category",K,ft="Technical",W,pt="Billing",Y,ht="Shipping",Z,_t="Product",ee,vt="Other",Be,Fe,J,de,mt='Priority <span class="text-red-500">*</span>',qe,$,z,gt="Select a priority",te,bt="Low",le,yt="Medium",re,Ct="High",se,xt="Urgent",Re,Ue,Pe,Q,fe,kt='Description <span class="text-red-500">*</span>',Ge,B,Je,Qe,_e,Tt='<button type="submit" class="btn btn-primary w-full">Submit Ticket</button>',Xe,ve,Et='<h2 class="text-xl font-bold mb-4">Before Submitting a Ticket</h2> <p class="mb-4">To help us resolve your issue more quickly, please:</p> <ul class="list-disc pl-5 space-y-2 text-gray-700"><li>Check our <a href="/help" class="text-primary hover:underline">FAQ section</a> to see if your question has already been answered</li> <li>Include any relevant order numbers or product information</li> <li>Be as specific as possible about the issue you&#39;re experiencing</li> <li>Attach screenshots or photos if they help illustrate the problem</li></ul>',je,Ke,Ot;b=new ot({props:{size:16,class:"mx-2"}}),f=new ot({props:{size:16,class:"mx-2"}}),R=new ot({props:{size:16,class:"mx-2"}});let I=s[2].subject&&jt(s),L=s[2].category&&St(s),P=s[2].priority&&Nt(s),j=s[0].length>0&&$t(s),S=s[2].description&&Mt(s);return{c(){t=a("meta"),o=m(),n=a("div"),r=a("div"),l=a("a"),l.textContent=x,D=m(),rt(b.$$.fragment),N=m(),C=a("a"),C.textContent=_,p=m(),rt(f.$$.fragment),c=m(),E=a("a"),E.textContent=Le,y=m(),rt(R.$$.fragment),oe=m(),ne=a("span"),ne.textContent=it,Ae=m(),he=a("h1"),he.textContent=at,Me=m(),ie=a("div"),be=a("div"),O=a("form"),U=a("div"),ae=a("label"),ae.innerHTML=ut,De=m(),H=a("input"),He=m(),I&&I.c(),Ve=m(),ue=a("div"),G=a("div"),ce=a("label"),ce.innerHTML=ct,ze=m(),w=a("select"),V=a("option"),V.textContent=dt,K=a("option"),K.textContent=ft,W=a("option"),W.textContent=pt,Y=a("option"),Y.textContent=ht,Z=a("option"),Z.textContent=_t,ee=a("option"),ee.textContent=vt,Be=m(),L&&L.c(),Fe=m(),J=a("div"),de=a("label"),de.innerHTML=mt,qe=m(),$=a("select"),z=a("option"),z.textContent=gt,te=a("option"),te.textContent=bt,le=a("option"),le.textContent=yt,re=a("option"),re.textContent=Ct,se=a("option"),se.textContent=xt,Re=m(),P&&P.c(),Ue=m(),j&&j.c(),Pe=m(),Q=a("div"),fe=a("label"),fe.innerHTML=kt,Ge=m(),B=a("textarea"),Je=m(),S&&S.c(),Qe=m(),_e=a("div"),_e.innerHTML=Tt,Xe=m(),ve=a("div"),ve.innerHTML=Et,this.h()},l(d){const A=zt("svelte-42sapk",document.head);t=i(A,"META",{name:!0,content:!0}),A.forEach(h),o=v(d),n=i(d,"DIV",{class:!0});var ye=k(n);r=i(ye,"DIV",{class:!0});var M=k(r);l=i(M,"A",{href:!0,class:!0,"data-svelte-h":!0}),g(l)!=="svelte-18kg8x7"&&(l.textContent=x),D=v(M),lt(b.$$.fragment,M),N=v(M),C=i(M,"A",{href:!0,class:!0,"data-svelte-h":!0}),g(C)!=="svelte-ilfw5s"&&(C.textContent=_),p=v(M),lt(f.$$.fragment,M),c=v(M),E=i(M,"A",{href:!0,class:!0,"data-svelte-h":!0}),g(E)!=="svelte-sz1i1m"&&(E.textContent=Le),y=v(M),lt(R.$$.fragment,M),oe=v(M),ne=i(M,"SPAN",{"data-svelte-h":!0}),g(ne)!=="svelte-1nv8pk4"&&(ne.textContent=it),M.forEach(h),Ae=v(ye),he=i(ye,"H1",{class:!0,"data-svelte-h":!0}),g(he)!=="svelte-1wdziuy"&&(he.textContent=at),Me=v(ye),ie=i(ye,"DIV",{class:!0});var Se=k(ie);be=i(Se,"DIV",{class:!0});var wt=k(be);O=i(wt,"FORM",{class:!0});var X=k(O);U=i(X,"DIV",{});var Ce=k(U);ae=i(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(ae)!=="svelte-2dlkgw"&&(ae.innerHTML=ut),De=v(Ce),H=i(Ce,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),He=v(Ce),I&&I.l(Ce),Ce.forEach(h),Ve=v(X),ue=i(X,"DIV",{class:!0});var Ne=k(ue);G=i(Ne,"DIV",{});var xe=k(G);ce=i(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(ce)!=="svelte-4ldsdi"&&(ce.innerHTML=ct),ze=v(xe),w=i(xe,"SELECT",{id:!0,class:!0});var me=k(w);V=i(me,"OPTION",{"data-svelte-h":!0}),g(V)!=="svelte-1k1xi34"&&(V.textContent=dt),K=i(me,"OPTION",{"data-svelte-h":!0}),g(K)!=="svelte-klluco"&&(K.textContent=ft),W=i(me,"OPTION",{"data-svelte-h":!0}),g(W)!=="svelte-8j0nno"&&(W.textContent=pt),Y=i(me,"OPTION",{"data-svelte-h":!0}),g(Y)!=="svelte-1b8huzi"&&(Y.textContent=ht),Z=i(me,"OPTION",{"data-svelte-h":!0}),g(Z)!=="svelte-79gbsw"&&(Z.textContent=_t),ee=i(me,"OPTION",{"data-svelte-h":!0}),g(ee)!=="svelte-902jce"&&(ee.textContent=vt),me.forEach(h),Be=v(xe),L&&L.l(xe),xe.forEach(h),Fe=v(Ne),J=i(Ne,"DIV",{});var ke=k(J);de=i(ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(de)!=="svelte-65fw2a"&&(de.innerHTML=mt),qe=v(ke),$=i(ke,"SELECT",{id:!0,class:!0});var Te=k($);z=i(Te,"OPTION",{"data-svelte-h":!0}),g(z)!=="svelte-8w0r7g"&&(z.textContent=gt),te=i(Te,"OPTION",{"data-svelte-h":!0}),g(te)!=="svelte-1f4z4ku"&&(te.textContent=bt),le=i(Te,"OPTION",{"data-svelte-h":!0}),g(le)!=="svelte-1u6j0ru"&&(le.textContent=yt),re=i(Te,"OPTION",{"data-svelte-h":!0}),g(re)!=="svelte-poeh2m"&&(re.textContent=Ct),se=i(Te,"OPTION",{"data-svelte-h":!0}),g(se)!=="svelte-pwtzze"&&(se.textContent=xt),Te.forEach(h),Re=v(ke),P&&P.l(ke),ke.forEach(h),Ne.forEach(h),Ue=v(X),j&&j.l(X),Pe=v(X),Q=i(X,"DIV",{});var Ee=k(Q);fe=i(Ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),g(fe)!=="svelte-em6yis"&&(fe.innerHTML=kt),Ge=v(Ee),B=i(Ee,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),k(B).forEach(h),Je=v(Ee),S&&S.l(Ee),Ee.forEach(h),Qe=v(X),_e=i(X,"DIV",{class:!0,"data-svelte-h":!0}),g(_e)!=="svelte-1v2xyqd"&&(_e.innerHTML=Tt),X.forEach(h),wt.forEach(h),Xe=v(Se),ve=i(Se,"DIV",{class:!0,"data-svelte-h":!0}),g(ve)!=="svelte-1lgncf"&&(ve.innerHTML=Et),Se.forEach(h),ye.forEach(h),this.h()},h(){document.title="Create New Support Ticket | Damned Designs",u(t,"name","description"),u(t,"content","Submit a new support ticket to get help from our customer service team."),u(l,"href","/"),u(l,"class","hover:underline"),u(C,"href","/help"),u(C,"class","hover:underline"),u(E,"href","/help/tickets"),u(E,"class","hover:underline"),u(r,"class","flex items-center text-sm mb-6"),u(he,"class","text-3xl font-bold mb-8"),u(ae,"for","subject"),u(ae,"class","block font-bold mb-2"),u(H,"type","text"),u(H,"id","subject"),u(H,"class","w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"),u(H,"placeholder","Brief summary of your issue"),u(ce,"for","category"),u(ce,"class","block font-bold mb-2"),V.__value="",T(V,V.__value),V.disabled=!0,V.selected=!0,K.__value="technical",T(K,K.__value),W.__value="billing",T(W,W.__value),Y.__value="shipping",T(Y,Y.__value),Z.__value="product",T(Z,Z.__value),ee.__value="other",T(ee,ee.__value),u(w,"id","category"),u(w,"class","w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"),s[1].category===void 0&&nt(()=>s[7].call(w)),u(de,"for","priority"),u(de,"class","block font-bold mb-2"),z.__value="",T(z,z.__value),z.disabled=!0,z.selected=!0,te.__value="low",T(te,te.__value),le.__value="medium",T(le,le.__value),re.__value="high",T(re,re.__value),se.__value="urgent",T(se,se.__value),u($,"id","priority"),u($,"class","w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"),s[1].priority===void 0&&nt(()=>s[8].call($)),u(ue,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),u(fe,"for","description"),u(fe,"class","block font-bold mb-2"),u(B,"id","description"),u(B,"rows","6"),u(B,"class","w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"),u(B,"placeholder","Please provide as much detail as possible about your issue"),u(_e,"class","pt-4"),u(O,"class","space-y-6"),u(be,"class","bg-white p-8 rounded-lg shadow-sm"),u(ve,"class","mt-8 bg-gray-50 p-6 rounded-lg"),u(ie,"class","max-w-3xl mx-auto"),u(n,"class","container py-12")},m(d,A){e(document.head,t),pe(d,o,A),pe(d,n,A),e(n,r),e(r,l),e(r,D),tt(b,r,null),e(r,N),e(r,C),e(r,p),tt(f,r,null),e(r,c),e(r,E),e(r,y),tt(R,r,null),e(r,oe),e(r,ne),e(n,Ae),e(n,he),e(n,Me),e(n,ie),e(ie,be),e(be,O),e(O,U),e(U,ae),e(U,De),e(U,H),T(H,s[1].subject),e(U,He),I&&I.m(U,null),e(O,Ve),e(O,ue),e(ue,G),e(G,ce),e(G,ze),e(G,w),e(w,V),e(w,K),e(w,W),e(w,Y),e(w,Z),e(w,ee),we(w,s[1].category,!0),e(G,Be),L&&L.m(G,null),e(ue,Fe),e(ue,J),e(J,de),e(J,qe),e(J,$),e($,z),e($,te),e($,le),e($,re),e($,se),we($,s[1].priority,!0),e(J,Re),P&&P.m(J,null),e(O,Ue),j&&j.m(O,null),e(O,Pe),e(O,Q),e(Q,fe),e(Q,Ge),e(Q,B),T(B,s[1].description),e(Q,Je),S&&S.m(Q,null),e(O,Qe),e(O,_e),e(ie,Xe),e(ie,ve),je=!0,Ke||(Ot=[Ie(H,"input",s[6]),Ie(w,"change",s[7]),Ie($,"change",s[8]),Ie(B,"input",s[10]),Vt(s[5].call(null,O))],Ke=!0)},p(d,[A]){A&2&&H.value!==d[1].subject&&T(H,d[1].subject),d[2].subject?I?I.p(d,A):(I=jt(d),I.c(),I.m(U,null)):I&&(I.d(1),I=null),A&2&&we(w,d[1].category),d[2].category?L?L.p(d,A):(L=St(d),L.c(),L.m(G,null)):L&&(L.d(1),L=null),A&2&&we($,d[1].priority),d[2].priority?P?P.p(d,A):(P=Nt(d),P.c(),P.m(J,null)):P&&(P.d(1),P=null),d[0].length>0?j?j.p(d,A):(j=$t(d),j.c(),j.m(O,Pe)):j&&(j.d(1),j=null),A&2&&T(B,d[1].description),d[2].description?S?S.p(d,A):(S=Mt(d),S.c(),S.m(Q,null)):S&&(S.d(1),S=null)},i(d){je||(et(b.$$.fragment,d),et(f.$$.fragment,d),et(R.$$.fragment,d),je=!0)},o(d){Ze(b.$$.fragment,d),Ze(f.$$.fragment,d),Ze(R.$$.fragment,d),je=!1},d(d){d&&(h(o),h(n)),h(t),Ye(b),Ye(f),Ye(R),I&&I.d(),L&&L.d(),P&&P.d(),j&&j.d(),S&&S.d(),Ke=!1,Ht(Ot)}}}function Xt(s,t,o){let n,r,l,x;$e(s,Ut,y=>o(11,n=y)),$e(s,Gt,y=>o(12,r=y));const D=Oe.object({subject:Oe.string().min(5,{message:"Subject must be at least 5 characters"}),description:Oe.string().min(20,{message:"Description must be at least 20 characters"}),category:Oe.enum(["technical","billing","shipping","product","other"],{required_error:"Please select a category"}),priority:Oe.enum(["low","medium","high","urgent"],{required_error:"Please select a priority"}),order_id:Oe.string().optional()}),{form:b,errors:N,enhance:C}=Jt(D,{id:"new-ticket",dataType:"json",onSubmit:async({formData:y,cancel:R})=>{try{const oe=await fetch("/api/tickets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:y.get("subject"),description:y.get("description"),category:y.get("category"),priority:y.get("priority"),order_id:y.get("order_id")})});if(!oe.ok){const ne=await oe.json();st.error(ne.error||"Failed to create ticket"),R();return}return{success:!0}}catch(oe){console.error("Error creating ticket:",oe),st.error("Failed to create ticket. Please try again."),R()}},onResult:({result:y})=>{y.type==="success"&&(st.success("Ticket submitted successfully!"),Lt("/help/tickets"))}});$e(s,b,y=>o(1,l=y)),$e(s,N,y=>o(2,x=y));let _=[];Bt(()=>{if(!r){Lt("/login");return}n&&n.orders&&o(0,_=n.orders.map(y=>({id:y.id,date:new Date(y.date).toLocaleDateString(),total:y.total})))});function p(){l.subject=this.value,b.set(l)}function f(){l.category=We(this),b.set(l)}function c(){l.priority=We(this),b.set(l)}function E(){l.order_id=We(this),b.set(l)}function Le(){l.description=this.value,b.set(l)}return[_,l,x,b,N,C,p,f,c,E,Le]}class sl extends qt{constructor(t){super(),Rt(this,t,Xt,Qt,Dt,{})}}export{sl as component};
