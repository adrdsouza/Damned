import{s as is,p as et,q as zt,r as Ws,u as Xs,v as Zs,w as Gs,d,b as t,i as ae,l as o,m as sl,c as i,g as v,e as m,o as I,f as V,h as c,j as g,t as A,k as Hs,x as ll,n as Ye,a as R,F as rl,y as al,z as Ms,A as Fs}from"../chunks/CtARYoZa.js";import{S as cs,i as us,d as me,t as Q,a as Y,m as _e,c as ve,b as ge,e as Ks,g as Qs}from"../chunks/CJBvT94Z.js";import{I as Ys,g as el,a as tl,e as Ls}from"../chunks/CCLH35N-.js";import{p as nl}from"../chunks/Ds-5SQlo.js";import{g as ol}from"../chunks/CfqzmGcx.js";import{i as il}from"../chunks/SJ4qyNXX.js";import{t as Vt}from"../chunks/DcmIUciy.js";import{C as os}from"../chunks/BxZMAExO.js";import{A as cl}from"../chunks/CAJbTMUF.js";function ul(a){let e;const r=a[2].default,l=Ws(r,a,a[3],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&8)&&Xs(l,r,n,n[3],e?Gs(r,n[3],s,null):Zs(n[3]),null)},i(n){e||(Y(l,n),e=!0)},o(n){Q(l,n),e=!1},d(n){l&&l.d(n)}}}function dl(a){let e,r;const l=[{name:"paperclip"},a[1],{iconNode:a[0]}];let n={$$slots:{default:[ul]},$$scope:{ctx:a}};for(let s=0;s<l.length;s+=1)n=et(n,l[s]);return e=new Ys({props:n}),{c(){ge(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,u){_e(e,s,u),r=!0},p(s,[u]){const C=u&3?el(l,[l[0],u&2&&tl(s[1]),u&1&&{iconNode:s[0]}]):{};u&8&&(C.$$scope={dirty:u,ctx:s}),e.$set(C)},i(s){r||(Y(e.$$.fragment,s),r=!0)},o(s){Q(e.$$.fragment,s),r=!1},d(s){me(e,s)}}}function fl(a,e,r){let{$$slots:l={},$$scope:n}=e;const s=[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"}]];return a.$$set=u=>{r(1,e=et(et({},e),zt(u))),"$$scope"in u&&r(3,n=u.$$scope)},e=zt(e),[s,e,l,n]}class hl extends cs{constructor(e){super(),us(this,e,fl,dl,is,{})}}function pl(a){let e;const r=a[2].default,l=Ws(r,a,a[3],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&8)&&Xs(l,r,n,n[3],e?Gs(r,n[3],s,null):Zs(n[3]),null)},i(n){e||(Y(l,n),e=!0)},o(n){Q(l,n),e=!1},d(n){l&&l.d(n)}}}function ml(a){let e,r;const l=[{name:"send"},a[1],{iconNode:a[0]}];let n={$$slots:{default:[pl]},$$scope:{ctx:a}};for(let s=0;s<l.length;s+=1)n=et(n,l[s]);return e=new Ys({props:n}),{c(){ge(e.$$.fragment)},l(s){ve(e.$$.fragment,s)},m(s,u){_e(e,s,u),r=!0},p(s,[u]){const C=u&3?el(l,[l[0],u&2&&tl(s[1]),u&1&&{iconNode:s[0]}]):{};u&8&&(C.$$scope={dirty:u,ctx:s}),e.$set(C)},i(s){r||(Y(e.$$.fragment,s),r=!0)},o(s){Q(e.$$.fragment,s),r=!1},d(s){me(e,s)}}}function _l(a,e,r){let{$$slots:l={},$$scope:n}=e;const s=[["path",{d:"m22 2-7 20-4-9-9-4Z"}],["path",{d:"M22 2 11 13"}]];return a.$$set=u=>{r(1,e=et(et({},e),zt(u))),"$$scope"in u&&r(3,n=u.$$scope)},e=zt(e),[s,e,l,n]}class vl extends cs{constructor(e){super(),us(this,e,_l,ml,is,{})}}function Us(a,e,r){const l=a.slice();return l[12]=e[r],l}function gl(a){let e,r,l,n,s,u=a[0].subject+"",C,x,b,y=jt(a[0].status)+"",f,k,D,_,h,w,j="Category",X,S,ee=Nt(a[0].category)+"",Z,P,T,B,M="Priority",N,q,de=St(a[0].priority)+"",te,Le,$,F,ne="Created",L,ce,tt=pe(a[0].created_at)+"",ct,Ot,ut,be,xe,ds="Description",Ht,Ue,st=a[0].description+"",dt,Mt,oe,Ce,fs="Conversation",Ft,ye,Lt,le,re,Ut,Re,ue,ke,hs="Ticket Information",Rt,O,we,$e,ps="Ticket ID",Bt,Ee,qt,lt=a[0].id+"",ft,Jt,De,Ie,ms="Status",Wt,Pe,rt=jt(a[0].status)+"",ht,pt,Xt,Te,Ve,_s="Priority",Zt,Ae,at=St(a[0].priority)+"",mt,_t,Gt,je,Se,vs="Category",Kt,Be,nt=Nt(a[0].category)+"",vt,Qt,Ne,ze,gs="Created",Yt,qe,ot=pe(a[0].created_at)+"",gt,es,Oe,He,bs="Last Updated",ts,Je,it=pe(a[0].updated_at)+"",bt,ss,ls,ie,Me,xs="Actions",rs,xt,fe,Cs="Back to Tickets",H,J=a[0].order_id&&Rs(a),We=Ls(a[1]),U=[];for(let p=0;p<We.length;p+=1)U[p]=Bs(Us(a,We,p));const ys=[yl,Cl],he=[];function ks(p,E){return p[0].status!=="closed"?0:1}le=ks(a),re=he[le]=ys[le](a);let W=a[0].order_id&&qs(a);function ws(p,E){if(p[0].status==="open"||p[0].status==="in_progress")return wl;if(p[0].status==="closed")return kl}let Xe=ws(a),G=Xe&&Xe(a);return{c(){e=c("div"),r=c("div"),l=c("div"),n=c("div"),s=c("h1"),C=A(u),x=g(),b=c("span"),f=A(y),D=g(),_=c("div"),h=c("div"),w=c("p"),w.textContent=j,X=g(),S=c("p"),Z=A(ee),P=g(),T=c("div"),B=c("p"),B.textContent=M,N=g(),q=c("p"),te=A(de),Le=g(),$=c("div"),F=c("p"),F.textContent=ne,L=g(),ce=c("p"),ct=A(tt),Ot=g(),J&&J.c(),ut=g(),be=c("div"),xe=c("h2"),xe.textContent=ds,Ht=g(),Ue=c("p"),dt=A(st),Mt=g(),oe=c("div"),Ce=c("h2"),Ce.textContent=fs,Ft=g(),ye=c("div");for(let p=0;p<U.length;p+=1)U[p].c();Lt=g(),re.c(),Ut=g(),Re=c("div"),ue=c("div"),ke=c("h2"),ke.textContent=hs,Rt=g(),O=c("div"),we=c("div"),$e=c("p"),$e.textContent=ps,Bt=g(),Ee=c("p"),qt=A("#"),ft=A(lt),Jt=g(),De=c("div"),Ie=c("p"),Ie.textContent=ms,Wt=g(),Pe=c("p"),ht=A(rt),Xt=g(),Te=c("div"),Ve=c("p"),Ve.textContent=_s,Zt=g(),Ae=c("p"),mt=A(at),Gt=g(),je=c("div"),Se=c("p"),Se.textContent=vs,Kt=g(),Be=c("p"),vt=A(nt),Qt=g(),Ne=c("div"),ze=c("p"),ze.textContent=gs,Yt=g(),qe=c("p"),gt=A(ot),es=g(),Oe=c("div"),He=c("p"),He.textContent=bs,ts=g(),Je=c("p"),bt=A(it),ss=g(),W&&W.c(),ls=g(),ie=c("div"),Me=c("h3"),Me.textContent=xs,rs=g(),G&&G.c(),xt=g(),fe=c("a"),fe.textContent=Cs,this.h()},l(p){e=i(p,"DIV",{class:!0});var E=m(e);r=i(E,"DIV",{class:!0});var se=m(r);l=i(se,"DIV",{class:!0});var z=m(l);n=i(z,"DIV",{class:!0});var Fe=m(n);s=i(Fe,"H1",{class:!0});var $s=m(s);C=V($s,u),$s.forEach(d),x=v(Fe),b=i(Fe,"SPAN",{class:!0});var Es=m(b);f=V(Es,y),Es.forEach(d),Fe.forEach(d),D=v(z),_=i(z,"DIV",{class:!0});var Ze=m(_);h=i(Ze,"DIV",{});var Ct=m(h);w=i(Ct,"P",{class:!0,"data-svelte-h":!0}),I(w)!=="svelte-f0f1ma"&&(w.textContent=j),X=v(Ct),S=i(Ct,"P",{class:!0});var Ds=m(S);Z=V(Ds,ee),Ds.forEach(d),Ct.forEach(d),P=v(Ze),T=i(Ze,"DIV",{});var yt=m(T);B=i(yt,"P",{class:!0,"data-svelte-h":!0}),I(B)!=="svelte-70h0wi"&&(B.textContent=M),N=v(yt),q=i(yt,"P",{class:!0});var Is=m(q);te=V(Is,de),Is.forEach(d),yt.forEach(d),Le=v(Ze),$=i(Ze,"DIV",{});var kt=m($);F=i(kt,"P",{class:!0,"data-svelte-h":!0}),I(F)!=="svelte-j9bwmu"&&(F.textContent=ne),L=v(kt),ce=i(kt,"P",{class:!0});var Ps=m(ce);ct=V(Ps,tt),Ps.forEach(d),kt.forEach(d),Ze.forEach(d),Ot=v(z),J&&J.l(z),ut=v(z),be=i(z,"DIV",{});var wt=m(be);xe=i(wt,"H2",{class:!0,"data-svelte-h":!0}),I(xe)!=="svelte-mxf6gc"&&(xe.textContent=ds),Ht=v(wt),Ue=i(wt,"P",{class:!0});var Ts=m(Ue);dt=V(Ts,st),Ts.forEach(d),wt.forEach(d),z.forEach(d),Mt=v(se),oe=i(se,"DIV",{class:!0});var Ge=m(oe);Ce=i(Ge,"H2",{class:!0,"data-svelte-h":!0}),I(Ce)!=="svelte-3baybp"&&(Ce.textContent=fs),Ft=v(Ge),ye=i(Ge,"DIV",{class:!0});var Vs=m(ye);for(let ns=0;ns<U.length;ns+=1)U[ns].l(Vs);Vs.forEach(d),Lt=v(Ge),re.l(Ge),Ge.forEach(d),se.forEach(d),Ut=v(E),Re=i(E,"DIV",{class:!0});var As=m(Re);ue=i(As,"DIV",{class:!0});var Ke=m(ue);ke=i(Ke,"H2",{class:!0,"data-svelte-h":!0}),I(ke)!=="svelte-1vziraw"&&(ke.textContent=hs),Rt=v(Ke),O=i(Ke,"DIV",{class:!0});var K=m(O);we=i(K,"DIV",{});var $t=m(we);$e=i($t,"P",{class:!0,"data-svelte-h":!0}),I($e)!=="svelte-1krlux3"&&($e.textContent=ps),Bt=v($t),Ee=i($t,"P",{class:!0});var as=m(Ee);qt=V(as,"#"),ft=V(as,lt),as.forEach(d),$t.forEach(d),Jt=v(K),De=i(K,"DIV",{});var Et=m(De);Ie=i(Et,"P",{class:!0,"data-svelte-h":!0}),I(Ie)!=="svelte-9jwcxo"&&(Ie.textContent=ms),Wt=v(Et),Pe=i(Et,"P",{class:!0});var js=m(Pe);ht=V(js,rt),js.forEach(d),Et.forEach(d),Xt=v(K),Te=i(K,"DIV",{});var Dt=m(Te);Ve=i(Dt,"P",{class:!0,"data-svelte-h":!0}),I(Ve)!=="svelte-70h0wi"&&(Ve.textContent=_s),Zt=v(Dt),Ae=i(Dt,"P",{class:!0});var Ss=m(Ae);mt=V(Ss,at),Ss.forEach(d),Dt.forEach(d),Gt=v(K),je=i(K,"DIV",{});var It=m(je);Se=i(It,"P",{class:!0,"data-svelte-h":!0}),I(Se)!=="svelte-f0f1ma"&&(Se.textContent=vs),Kt=v(It),Be=i(It,"P",{class:!0});var Ns=m(Be);vt=V(Ns,nt),Ns.forEach(d),It.forEach(d),Qt=v(K),Ne=i(K,"DIV",{});var Pt=m(Ne);ze=i(Pt,"P",{class:!0,"data-svelte-h":!0}),I(ze)!=="svelte-j9bwmu"&&(ze.textContent=gs),Yt=v(Pt),qe=i(Pt,"P",{class:!0});var zs=m(qe);gt=V(zs,ot),zs.forEach(d),Pt.forEach(d),es=v(K),Oe=i(K,"DIV",{});var Tt=m(Oe);He=i(Tt,"P",{class:!0,"data-svelte-h":!0}),I(He)!=="svelte-1lch0oz"&&(He.textContent=bs),ts=v(Tt),Je=i(Tt,"P",{class:!0});var Os=m(Je);bt=V(Os,it),Os.forEach(d),Tt.forEach(d),ss=v(K),W&&W.l(K),K.forEach(d),ls=v(Ke),ie=i(Ke,"DIV",{class:!0});var Qe=m(ie);Me=i(Qe,"H3",{class:!0,"data-svelte-h":!0}),I(Me)!=="svelte-t5upna"&&(Me.textContent=xs),rs=v(Qe),G&&G.l(Qe),xt=v(Qe),fe=i(Qe,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(fe)!=="svelte-1urmcp8"&&(fe.textContent=Cs),Qe.forEach(d),Ke.forEach(d),As.forEach(d),E.forEach(d),this.h()},h(){o(s,"class","text-2xl font-bold"),o(b,"class",k=`px-3 py-1 rounded-full text-sm font-medium ${At(a[0].status)}`),o(n,"class","flex justify-between items-start mb-4"),o(w,"class","text-sm text-gray-500"),o(S,"class","font-medium"),o(B,"class","text-sm text-gray-500"),o(q,"class","font-medium"),o(F,"class","text-sm text-gray-500"),o(ce,"class","font-medium"),o(_,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"),o(xe,"class","font-bold mb-2"),o(Ue,"class","text-gray-700 whitespace-pre-line"),o(l,"class","bg-white p-6 rounded-lg shadow-sm mb-8"),o(Ce,"class","text-xl font-bold mb-6"),o(ye,"class","space-y-6 mb-6"),o(oe,"class","bg-white p-6 rounded-lg shadow-sm mb-8"),o(r,"class","lg:col-span-2"),o(ke,"class","text-xl font-bold mb-4"),o($e,"class","text-sm text-gray-500"),o(Ee,"class","font-medium"),o(Ie,"class","text-sm text-gray-500"),o(Pe,"class",pt=`inline-block px-2 py-1 rounded-full text-sm font-medium ${At(a[0].status)}`),o(Ve,"class","text-sm text-gray-500"),o(Ae,"class",_t=`inline-block px-2 py-1 rounded-full text-sm font-medium ${Js(a[0].priority)}`),o(Se,"class","text-sm text-gray-500"),o(Be,"class","font-medium"),o(ze,"class","text-sm text-gray-500"),o(qe,"class","font-medium"),o(He,"class","text-sm text-gray-500"),o(Je,"class","font-medium"),o(O,"class","space-y-4"),o(Me,"class","font-bold mb-3"),o(fe,"href","/help/tickets"),o(fe,"class","btn btn-outline w-full block text-center"),o(ie,"class","mt-6 pt-6 border-t border-gray-200"),o(ue,"class","bg-white p-6 rounded-lg shadow-sm sticky top-24"),o(Re,"class","lg:col-span-1"),o(e,"class","grid grid-cols-1 lg:grid-cols-3 gap-8")},m(p,E){ae(p,e,E),t(e,r),t(r,l),t(l,n),t(n,s),t(s,C),t(n,x),t(n,b),t(b,f),t(l,D),t(l,_),t(_,h),t(h,w),t(h,X),t(h,S),t(S,Z),t(_,P),t(_,T),t(T,B),t(T,N),t(T,q),t(q,te),t(_,Le),t(_,$),t($,F),t($,L),t($,ce),t(ce,ct),t(l,Ot),J&&J.m(l,null),t(l,ut),t(l,be),t(be,xe),t(be,Ht),t(be,Ue),t(Ue,dt),t(r,Mt),t(r,oe),t(oe,Ce),t(oe,Ft),t(oe,ye);for(let se=0;se<U.length;se+=1)U[se]&&U[se].m(ye,null);t(oe,Lt),he[le].m(oe,null),t(e,Ut),t(e,Re),t(Re,ue),t(ue,ke),t(ue,Rt),t(ue,O),t(O,we),t(we,$e),t(we,Bt),t(we,Ee),t(Ee,qt),t(Ee,ft),t(O,Jt),t(O,De),t(De,Ie),t(De,Wt),t(De,Pe),t(Pe,ht),t(O,Xt),t(O,Te),t(Te,Ve),t(Te,Zt),t(Te,Ae),t(Ae,mt),t(O,Gt),t(O,je),t(je,Se),t(je,Kt),t(je,Be),t(Be,vt),t(O,Qt),t(O,Ne),t(Ne,ze),t(Ne,Yt),t(Ne,qe),t(qe,gt),t(O,es),t(O,Oe),t(Oe,He),t(Oe,ts),t(Oe,Je),t(Je,bt),t(O,ss),W&&W.m(O,null),t(ue,ls),t(ue,ie),t(ie,Me),t(ie,rs),G&&G.m(ie,null),t(ie,xt),t(ie,fe),H=!0},p(p,E){if((!H||E&1)&&u!==(u=p[0].subject+"")&&R(C,u),(!H||E&1)&&y!==(y=jt(p[0].status)+"")&&R(f,y),(!H||E&1&&k!==(k=`px-3 py-1 rounded-full text-sm font-medium ${At(p[0].status)}`))&&o(b,"class",k),(!H||E&1)&&ee!==(ee=Nt(p[0].category)+"")&&R(Z,ee),(!H||E&1)&&de!==(de=St(p[0].priority)+"")&&R(te,de),(!H||E&1)&&tt!==(tt=pe(p[0].created_at)+"")&&R(ct,tt),p[0].order_id?J?J.p(p,E):(J=Rs(p),J.c(),J.m(l,ut)):J&&(J.d(1),J=null),(!H||E&1)&&st!==(st=p[0].description+"")&&R(dt,st),E&2){We=Ls(p[1]);let z;for(z=0;z<We.length;z+=1){const Fe=Us(p,We,z);U[z]?U[z].p(Fe,E):(U[z]=Bs(Fe),U[z].c(),U[z].m(ye,null))}for(;z<U.length;z+=1)U[z].d(1);U.length=We.length}let se=le;le=ks(p),le===se?he[le].p(p,E):(Qs(),Q(he[se],1,1,()=>{he[se]=null}),Ks(),re=he[le],re?re.p(p,E):(re=he[le]=ys[le](p),re.c()),Y(re,1),re.m(oe,null)),(!H||E&1)&&lt!==(lt=p[0].id+"")&&R(ft,lt),(!H||E&1)&&rt!==(rt=jt(p[0].status)+"")&&R(ht,rt),(!H||E&1&&pt!==(pt=`inline-block px-2 py-1 rounded-full text-sm font-medium ${At(p[0].status)}`))&&o(Pe,"class",pt),(!H||E&1)&&at!==(at=St(p[0].priority)+"")&&R(mt,at),(!H||E&1&&_t!==(_t=`inline-block px-2 py-1 rounded-full text-sm font-medium ${Js(p[0].priority)}`))&&o(Ae,"class",_t),(!H||E&1)&&nt!==(nt=Nt(p[0].category)+"")&&R(vt,nt),(!H||E&1)&&ot!==(ot=pe(p[0].created_at)+"")&&R(gt,ot),(!H||E&1)&&it!==(it=pe(p[0].updated_at)+"")&&R(bt,it),p[0].order_id?W?W.p(p,E):(W=qs(p),W.c(),W.m(O,null)):W&&(W.d(1),W=null),Xe!==(Xe=ws(p))&&(G&&G.d(1),G=Xe&&Xe(p),G&&(G.c(),G.m(ie,xt)))},i(p){H||(Y(re),H=!0)},o(p){Q(re),H=!1},d(p){p&&d(e),J&&J.d(),rl(U,p),he[le].d(),W&&W.d(),G&&G.d()}}}function bl(a){let e,r,l,n,s,u,C,x,b="Please check the ticket ID or try again later.",y,f,k="Back to Tickets",D;return l=new cl({props:{size:48,class:"mx-auto"}}),{c(){e=c("div"),r=c("div"),ge(l.$$.fragment),n=g(),s=c("h2"),u=A(a[3]),C=g(),x=c("p"),x.textContent=b,y=g(),f=c("a"),f.textContent=k,this.h()},l(_){e=i(_,"DIV",{class:!0});var h=m(e);r=i(h,"DIV",{class:!0});var w=m(r);ve(l.$$.fragment,w),w.forEach(d),n=v(h),s=i(h,"H2",{class:!0});var j=m(s);u=V(j,a[3]),j.forEach(d),C=v(h),x=i(h,"P",{class:!0,"data-svelte-h":!0}),I(x)!=="svelte-11qde4n"&&(x.textContent=b),y=v(h),f=i(h,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(f)!=="svelte-1x82fkf"&&(f.textContent=k),h.forEach(d),this.h()},h(){o(r,"class","mb-4 text-red-500"),o(s,"class","text-xl font-bold mb-2"),o(x,"class","text-gray-600 mb-6"),o(f,"href","/help/tickets"),o(f,"class","btn btn-primary"),o(e,"class","bg-white p-12 rounded-lg shadow-sm text-center")},m(_,h){ae(_,e,h),t(e,r),_e(l,r,null),t(e,n),t(e,s),t(s,u),t(e,C),t(e,x),t(e,y),t(e,f),D=!0},p(_,h){(!D||h&8)&&R(u,_[3])},i(_){D||(Y(l.$$.fragment,_),D=!0)},o(_){Q(l.$$.fragment,_),D=!1},d(_){_&&d(e),me(l)}}}function xl(a){let e,r='<div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div>';return{c(){e=c("div"),e.innerHTML=r,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-2o2p7e"&&(e.innerHTML=r),this.h()},h(){o(e,"class","flex justify-center items-center py-12")},m(l,n){ae(l,e,n)},p:Ye,i:Ye,o:Ye,d(l){l&&d(e)}}}function Rs(a){let e,r,l="Related Order",n,s,u,C=a[0].order_id+"",x,b;return{c(){e=c("div"),r=c("p"),r.textContent=l,n=g(),s=c("a"),u=A("Order #"),x=A(C),this.h()},l(y){e=i(y,"DIV",{class:!0});var f=m(e);r=i(f,"P",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-10p2voh"&&(r.textContent=l),n=v(f),s=i(f,"A",{href:!0,class:!0});var k=m(s);u=V(k,"Order #"),x=V(k,C),k.forEach(d),f.forEach(d),this.h()},h(){o(r,"class","text-sm text-gray-500"),o(s,"href",b=`/account/orders/${a[0].order_id}`),o(s,"class","text-primary hover:underline font-medium"),o(e,"class","bg-gray-50 p-4 rounded-lg mb-6")},m(y,f){ae(y,e,f),t(e,r),t(e,n),t(e,s),t(s,u),t(s,x)},p(y,f){f&1&&C!==(C=y[0].order_id+"")&&R(x,C),f&1&&b!==(b=`/account/orders/${y[0].order_id}`)&&o(s,"href",b)},d(y){y&&d(e)}}}function Bs(a){let e,r,l,n=a[12].message+"",s,u,C,x=pe(a[12].created_at)+"",b,y,f,k,D;return{c(){e=c("div"),r=c("div"),l=c("p"),s=A(n),u=g(),C=c("p"),b=A(x),k=g(),this.h()},l(_){e=i(_,"DIV",{class:!0});var h=m(e);r=i(h,"DIV",{class:!0});var w=m(r);l=i(w,"P",{class:!0});var j=m(l);s=V(j,n),j.forEach(d),u=v(w),C=i(w,"P",{class:!0});var X=m(C);b=V(X,x),X.forEach(d),w.forEach(d),k=v(h),h.forEach(d),this.h()},h(){o(l,"class","whitespace-pre-line"),o(C,"class",y=`text-xs mt-2 ${a[12].is_from_customer?"text-gray-200":"text-gray-500"}`),o(r,"class",f=`max-w-3/4 rounded-lg p-4 ${a[12].is_from_customer?"bg-primary text-white":"bg-gray-100"}`),o(e,"class",D=`flex ${a[12].is_from_customer?"justify-end":"justify-start"}`)},m(_,h){ae(_,e,h),t(e,r),t(r,l),t(l,s),t(r,u),t(r,C),t(C,b),t(e,k)},p(_,h){h&2&&n!==(n=_[12].message+"")&&R(s,n),h&2&&x!==(x=pe(_[12].created_at)+"")&&R(b,x),h&2&&y!==(y=`text-xs mt-2 ${_[12].is_from_customer?"text-gray-200":"text-gray-500"}`)&&o(C,"class",y),h&2&&f!==(f=`max-w-3/4 rounded-lg p-4 ${_[12].is_from_customer?"bg-primary text-white":"bg-gray-100"}`)&&o(r,"class",f),h&2&&D!==(D=`flex ${_[12].is_from_customer?"justify-end":"justify-start"}`)&&o(e,"class",D)},d(_){_&&d(e)}}}function Cl(a){let e,r='<div class="bg-gray-50 p-4 rounded-lg text-center"><p class="text-gray-700">This ticket is closed. If you need further assistance, please create a new ticket.</p> <a href="/help/tickets/new" class="btn btn-primary mt-3">Create New Ticket</a></div>';return{c(){e=c("div"),e.innerHTML=r,this.h()},l(l){e=i(l,"DIV",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-1y9ya9v"&&(e.innerHTML=r),this.h()},h(){o(e,"class","border-t border-gray-200 pt-6")},m(l,n){ae(l,e,n)},p:Ye,i:Ye,o:Ye,d(l){l&&d(e)}}}function yl(a){let e,r,l="Reply",n,s,u,C,x,b,y,f,k,D,_,h,w,j,X="We typically respond within 24 hours",S,ee,Z;return b=new vl({props:{size:18}}),_=new hl({props:{size:16,class:"mr-1"}}),{c(){e=c("div"),r=c("h3"),r.textContent=l,n=g(),s=c("div"),u=c("textarea"),C=g(),x=c("button"),ge(b.$$.fragment),f=g(),k=c("div"),D=c("button"),ge(_.$$.fragment),h=A(`
                  Attach File`),w=g(),j=c("p"),j.textContent=X,this.h()},l(P){e=i(P,"DIV",{class:!0});var T=m(e);r=i(T,"H3",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-zm6pdd"&&(r.textContent=l),n=v(T),s=i(T,"DIV",{class:!0});var B=m(s);u=i(B,"TEXTAREA",{rows:!0,class:!0,placeholder:!0}),m(u).forEach(d),C=v(B),x=i(B,"BUTTON",{class:!0});var M=m(x);ve(b.$$.fragment,M),M.forEach(d),B.forEach(d),f=v(T),k=i(T,"DIV",{class:!0});var N=m(k);D=i(N,"BUTTON",{class:!0});var q=m(D);ve(_.$$.fragment,q),h=V(q,`
                  Attach File`),q.forEach(d),w=v(N),j=i(N,"P",{class:!0,"data-svelte-h":!0}),I(j)!=="svelte-1rqa703"&&(j.textContent=X),N.forEach(d),T.forEach(d),this.h()},h(){o(r,"class","font-bold mb-3"),o(u,"rows","3"),o(u,"class","flex-grow px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-primary"),o(u,"placeholder","Type your message here..."),u.disabled=a[5],o(x,"class","bg-primary text-white px-4 rounded-r-md hover:bg-gray-800 transition-colors flex items-center"),x.disabled=y=a[5]||!a[4].trim(),o(s,"class","flex"),o(D,"class","text-gray-500 hover:text-gray-700 flex items-center text-sm"),o(j,"class","text-xs text-gray-500"),o(k,"class","flex justify-between items-center mt-3"),o(e,"class","border-t border-gray-200 pt-6")},m(P,T){ae(P,e,T),t(e,r),t(e,n),t(e,s),t(s,u),Ms(u,a[4]),t(s,C),t(s,x),_e(b,x,null),t(e,f),t(e,k),t(k,D),_e(_,D,null),t(D,h),t(k,w),t(k,j),S=!0,ee||(Z=[Fs(u,"input",a[8]),Fs(x,"click",a[7])],ee=!0)},p(P,T){(!S||T&32)&&(u.disabled=P[5]),T&16&&Ms(u,P[4]),(!S||T&48&&y!==(y=P[5]||!P[4].trim()))&&(x.disabled=y)},i(P){S||(Y(b.$$.fragment,P),Y(_.$$.fragment,P),S=!0)},o(P){Q(b.$$.fragment,P),Q(_.$$.fragment,P),S=!1},d(P){P&&d(e),me(b),me(_),ee=!1,al(Z)}}}function qs(a){let e,r,l="Related Order",n,s,u,C=a[0].order_id+"",x,b;return{c(){e=c("div"),r=c("p"),r.textContent=l,n=g(),s=c("a"),u=A("Order #"),x=A(C),this.h()},l(y){e=i(y,"DIV",{});var f=m(e);r=i(f,"P",{class:!0,"data-svelte-h":!0}),I(r)!=="svelte-10p2voh"&&(r.textContent=l),n=v(f),s=i(f,"A",{href:!0,class:!0});var k=m(s);u=V(k,"Order #"),x=V(k,C),k.forEach(d),f.forEach(d),this.h()},h(){o(r,"class","text-sm text-gray-500"),o(s,"href",b=`/account/orders/${a[0].order_id}`),o(s,"class","text-primary hover:underline font-medium")},m(y,f){ae(y,e,f),t(e,r),t(e,n),t(e,s),t(s,u),t(s,x)},p(y,f){f&1&&C!==(C=y[0].order_id+"")&&R(x,C),f&1&&b!==(b=`/account/orders/${y[0].order_id}`)&&o(s,"href",b)},d(y){y&&d(e)}}}function kl(a){let e,r="Reopen Ticket";return{c(){e=c("button"),e.textContent=r,this.h()},l(l){e=i(l,"BUTTON",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-1y34jlp"&&(e.textContent=r),this.h()},h(){o(e,"class","btn btn-primary w-full mb-3")},m(l,n){ae(l,e,n)},d(l){l&&d(e)}}}function wl(a){let e,r="Close Ticket";return{c(){e=c("button"),e.textContent=r,this.h()},l(l){e=i(l,"BUTTON",{class:!0,"data-svelte-h":!0}),I(e)!=="svelte-1tuyodi"&&(e.textContent=r),this.h()},h(){o(e,"class","btn btn-secondary w-full mb-3")},m(l,n){ae(l,e,n)},d(l){l&&d(e)}}}function $l(a){let e,r,l,n,s,u,C="Home",x,b,y,f,k="Support",D,_,h,w,j="My Tickets",X,S,ee,Z,P,T,B,M,N,q;document.title=e="Support Ticket #"+a[6]+" | Damned Designs",b=new os({props:{size:16,class:"mx-2"}}),_=new os({props:{size:16,class:"mx-2"}}),S=new os({props:{size:16,class:"mx-2"}});const de=[xl,bl,gl],te=[];function Le($,F){return $[2]?0:$[3]?1:2}return M=Le(a),N=te[M]=de[M](a),{c(){r=c("meta"),l=g(),n=c("div"),s=c("div"),u=c("a"),u.textContent=C,x=g(),ge(b.$$.fragment),y=g(),f=c("a"),f.textContent=k,D=g(),ge(_.$$.fragment),h=g(),w=c("a"),w.textContent=j,X=g(),ge(S.$$.fragment),ee=g(),Z=c("span"),P=A("Ticket #"),T=A(a[6]),B=g(),N.c(),this.h()},l($){const F=sl("svelte-zezef6",document.head);r=i(F,"META",{name:!0,content:!0}),F.forEach(d),l=v($),n=i($,"DIV",{class:!0});var ne=m(n);s=i(ne,"DIV",{class:!0});var L=m(s);u=i(L,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(u)!=="svelte-18kg8x7"&&(u.textContent=C),x=v(L),ve(b.$$.fragment,L),y=v(L),f=i(L,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(f)!=="svelte-ilfw5s"&&(f.textContent=k),D=v(L),ve(_.$$.fragment,L),h=v(L),w=i(L,"A",{href:!0,class:!0,"data-svelte-h":!0}),I(w)!=="svelte-sz1i1m"&&(w.textContent=j),X=v(L),ve(S.$$.fragment,L),ee=v(L),Z=i(L,"SPAN",{});var ce=m(Z);P=V(ce,"Ticket #"),T=V(ce,a[6]),ce.forEach(d),L.forEach(d),B=v(ne),N.l(ne),ne.forEach(d),this.h()},h(){o(r,"name","description"),o(r,"content","View and manage your support ticket with Damned Designs customer service."),o(u,"href","/"),o(u,"class","hover:underline"),o(f,"href","/help"),o(f,"class","hover:underline"),o(w,"href","/help/tickets"),o(w,"class","hover:underline"),o(s,"class","flex items-center text-sm mb-6"),o(n,"class","container py-12")},m($,F){t(document.head,r),ae($,l,F),ae($,n,F),t(n,s),t(s,u),t(s,x),_e(b,s,null),t(s,y),t(s,f),t(s,D),_e(_,s,null),t(s,h),t(s,w),t(s,X),_e(S,s,null),t(s,ee),t(s,Z),t(Z,P),t(Z,T),t(n,B),te[M].m(n,null),q=!0},p($,[F]){(!q||F&64)&&e!==(e="Support Ticket #"+$[6]+" | Damned Designs")&&(document.title=e);let ne=M;M=Le($),M===ne?te[M].p($,F):(Qs(),Q(te[ne],1,1,()=>{te[ne]=null}),Ks(),N=te[M],N?N.p($,F):(N=te[M]=de[M]($),N.c()),Y(N,1),N.m(n,null))},i($){q||(Y(b.$$.fragment,$),Y(_.$$.fragment,$),Y(S.$$.fragment,$),Y(N),q=!0)},o($){Q(b.$$.fragment,$),Q(_.$$.fragment,$),Q(S.$$.fragment,$),Q(N),q=!1},d($){$&&(d(l),d(n)),d(r),me(b),me(_),me(S),te[M].d()}}}function pe(a){const e=new Date(a);return e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function At(a){switch(a){case"open":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function Js(a){switch(a){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-blue-100 text-blue-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}function jt(a){return a.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}function St(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Nt(a){return a.charAt(0).toUpperCase()+a.slice(1)}function El(a,e,r){let l,n;Hs(a,il,h=>r(9,l=h)),Hs(a,nl,h=>r(10,n=h));let s=null,u=[],C=!0,x=null,b="",y=!1;const f=n.params.id;async function k(){r(2,C=!0),r(3,x=null);try{const h=await fetch(`/api/tickets/${f}`);if(!h.ok)throw h.status===404?new Error("Ticket not found"):new Error("Failed to fetch ticket");const w=await h.json();r(0,s=w.ticket);const j=await fetch(`/api/tickets/${f}/messages`);if(!j.ok)throw new Error("Failed to fetch messages");const X=await j.json();r(1,u=X.messages)}catch(h){console.error("Error fetching ticket:",h),r(3,x=h.message==="Ticket not found"?"Ticket not found. It may have been deleted or you don't have permission to view it.":"Failed to load ticket. Please try again."),Vt.error(x)}finally{r(2,C=!1)}}async function D(){if(!b.trim()){Vt.error("Please enter a message");return}r(5,y=!0);try{const h=await fetch(`/api/tickets/${f}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:b})});if(!h.ok)throw new Error("Failed to send message");const w=await h.json();r(1,u=[...u,w.message]),r(4,b=""),r(0,s.updated_at=new Date().toISOString(),s),Vt.success("Message sent successfully")}catch(h){console.error("Error sending message:",h),Vt.error("Failed to send message. Please try again.")}finally{r(5,y=!1)}}ll(()=>{if(!l){ol("/login");return}k()});function _(){b=this.value,r(4,b)}return[s,u,C,x,b,y,f,D,_]}class zl extends cs{constructor(e){super(),us(this,e,El,$l,is,{})}}export{zl as component};
